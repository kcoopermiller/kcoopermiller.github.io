---
import BasicLayout from "./BasicLayout.astro";
import { Image } from "astro:assets";

export interface Props {
  title: string;
  description: string;
  photos: { src: ImageMetadata; alt: string }[];
}

const { title, description, photos = [] } = Astro.props;

const splitIntoColumns = (photos: Props["photos"], numColumns: number) => {
  if (!photos || photos.length === 0) return [];
  const columns = Array.from({ length: numColumns }, () => []);
  photos.forEach((photo, index) => {
    columns[index % numColumns].push(photo);
  });
  return columns;
};

const columns = splitIntoColumns(photos, 4);
---

<BasicLayout title={title} description={description}>
  <main
    id="blog"
    class="mx-auto max-w-3xl w-full h-screen p-8 text-neutral-100"
  >
    <a
      href="/photos"
      class="text-white bg-neutral-900 hover:bg-neutral-800 px-4 py-2 border-1 border-solid border-neutral-600 rounded-lg mb-8"
      >Back</a
    >
    <div class="my-10">
      <h1 class="text-5xl font-semibold">{title}</h1>
      <div class="flex justify-between pt-4 text-gray-500 text-sm">
        <p>{description}</p>
      </div>
    </div>
    <div class="flex flex-wrap -mx-2">
      {columns.map((column) => (
        <div class="w-full sm:w-1/2 md:w-1/3 lg:w-1/4 px-2">
          {column.map((photo) => (
            <Image
              src={photo.src}
              alt={photo.alt}
              class="w-full mb-4 hover:opacity-80 transition-opacity duration-300"
              onclick="window.open(this.src)"
              loading="lazy"
              decoding="async"
            />
          ))}
        </div>
      ))}
    </div>
  </main>
</BasicLayout>